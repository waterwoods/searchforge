â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘              P95 å»¶è¿Ÿä¼˜åŒ–å¥—ä»¶ - DevåŠ©æ‰‹æœ€ç»ˆæ±‡æŠ¥                                  â•‘
â•‘              ä»»åŠ¡çŠ¶æ€: âœ… å®Œæˆ | å›æ»š: ğŸ”´ å·²è§¦å‘                                 â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
1ï¸âƒ£  ä¸¤é“é—¸å°±ç»ªè¯æ®
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âœ… /api/health/embeddings: ok=true
   æ¨¡å‹å: sentence-transformers/all-MiniLM-L6-v2
   ç»´åº¦: 384
   åç«¯: SBERT
   è€—æ—¶: 0.157ç§’ (instant ready)

âœ… /ready: ok=true, phase=ready

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2ï¸âƒ£  ä¸‰ä¸ªç­–ç•¥JSONå‰10è¡Œ
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

â–¸ policy_baseline.json
{
  "name": "baseline_v0",
  "top_k": 10, "mmr": false,
  "ef_search": 96, "concurrency": 12, "warm_cache": 0
}

â–¸ policy_latency_v1.json
{
  "name": "policy_latency_v1",
  "top_k": 10, "mmr": false,
  "ef_search": 32, "concurrency": 4, "warm_cache": 100
}

â–¸ current_policy.json (after rollback)
{
  "name": "baseline_v0",
  "top_k": 10, "mmr": false,
  "ef_search": 96, "concurrency": 12, "warm_cache": 0
}

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
3ï¸âƒ£  å››ä¸ªA/Bä½œä¸šæ ¸å¿ƒæŒ‡æ ‡
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Job ID      â”‚ Policy       â”‚ Dataset â”‚ Recall@10 â”‚ P95(ms) â”‚ QPS â”‚ Status â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ c4757eb86bccâ”‚ baseline     â”‚ gold    â”‚   0.988   â”‚  1280   â”‚ 0.99â”‚   âœ“    â”‚
â”‚ 28cc6005e8d2â”‚ latency_v1   â”‚ gold    â”‚   0.988   â”‚  1255   â”‚ 0.99â”‚   âš ï¸   â”‚
â”‚ 6814c0a78422â”‚ baseline     â”‚ hard    â”‚   0.000   â”‚    0    â”‚ 0.00â”‚   âœ—    â”‚
â”‚ 4979fb7c033eâ”‚ latency_v1   â”‚ hard    â”‚   0.000   â”‚    0    â”‚ 0.00â”‚   âœ—    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜

è¯´æ˜: âœ“=æˆåŠŸ | âš ï¸=è¶…æ ‡è§¦å‘å›æ»š | âœ—=Hardæ•°æ®é›†å¤±è´¥

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
4ï¸âƒ£  å›æ»šçŠ¶æ€ä¸current_policyæŒ‡å‘
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ”´ ROLLBACK TRIGGERED
   
   åŸå› : latency_v1 P95=1255ms > 1000ms
   åŠ¨ä½œ: cp policy_baseline.json â†’ current_policy.json
   
âœ… current_policy ç°åœ¨æŒ‡å‘: baseline_v0
   é…ç½®: ef=96, conc=12, warm=0

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
5ï¸âƒ£  äº§å‡ºæ–‡ä»¶æ¸…å•ï¼ˆç›¸å¯¹è·¯å¾„ï¼‰
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“‚ JSON (6ä¸ª)
   configs/policies/policy_baseline.json       207 bytes
   configs/policies/policy_latency_v1.json     228 bytes
   configs/policies/current_policy.json        207 bytes
   reports/ab_latency_results.json             ~1 KB
   reports/winners_latency.json                1.6 KB
   reports/latency_grid_all.json               5.2 KB

ğŸ“‚ MD (3ä¸ª)
   reports/ab_latency_summary.md               ~3 KB
   reports/AB_LATENCY_FINAL_REPORT.md          ~8 KB
   reports/LATENCY_OPTIMIZATION_KEY_FINDINGS.md 15 KB

ğŸ“‚ PNG (3ä¸ª)
   reports/plots/ef_vs_p95.png                 69 KB
   reports/plots/concurrency_vs_p95.png        67 KB
   reports/plots/warm_vs_cold.png              71 KB

ğŸ“‚ å·¥å…·è„šæœ¬ (2ä¸ª)
   scripts/ab_latency_smoke.sh                 7.2 KB (executable)
   scripts/policy_switch.sh                    1.4 KB (executable)

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
6ï¸âƒ£  winners_latency.jsonæ®µè½ä¸policy_switchç”¨æ³•
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

â–¸ Winnersä¸‰æ¡£é…ç½®ï¼ˆç²¾ç®€ï¼‰:
{
  "tiers": {
    "timesaving": {
      "config": {"ef_search":32, "concurrency":4, "warm_cache":100},
      "p95_ms_sample30": 558,
      "p95_ms_sample200": 1255
    },
    "balanced": {
      "config": {"ef_search":32, "concurrency":4, "warm_cache":100},
      "p95_ms_sample200": 1255
    },
    "quality": {
      "config": {"ef_search":96, "concurrency":12, "warm_cache":0},
      "p95_ms_sample200": 1280
    }
  },
  "current_policy": "baseline_v0",
  "rollback_triggered": true
}

â–¸ policy_switch.shç”¨æ³•:
   bash scripts/policy_switch.sh baseline      # åˆ‡æ¢åˆ°baseline
   bash scripts/policy_switch.sh latency_v1    # åˆ‡æ¢åˆ°å»¶è¿Ÿä¼˜åŒ–ç­–ç•¥
   
   è¾“å‡ºç¤ºä¾‹:
   ğŸ”„ Switching policy...
   Before: baseline_v0 (ef=96)
   After:  policy_latency_v1 (ef=32)
   âœ… Switched to: latency_v1

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
7ï¸âƒ£  æœ€åçƒŸæµ‹æŒ‡æ ‡ä¸ä¸€å¥è¯ç»“è®º
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

çƒŸæµ‹æŒ‡æ ‡ï¼ˆcurrent_policy=baseline, sample=30ï¼‰:
   Job ID: 54834c3587a0
   Recall@10: 0.98
   P95: 500.40ms
   Source: runner

å¯¹æ¯”A/B Baseline (sample=200):
   Recall@10: 0.988
   P95: 1280ms

åå·®åˆ†æ:
   Recall: 0.98 vs 0.988 â†’ +0.8% (ä¸€è‡´) âœ…
   P95: 500ms vs 1280ms â†’ +156% (æ˜¾è‘—å·®å¼‚) âš ï¸

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ä¸€å¥è¯ç»“è®º
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âš ï¸  çƒŸæµ‹P95=500msï¼ŒA/Bæµ‹è¯•P95=1280msï¼Œåå·®+156%è¶…è¿‡Â±10%èŒƒå›´ï¼Œéœ€å¤æŸ¥ï¼š
   sample sizeå¯¹P95å½±å“è¿œè¶…é¢„æœŸï¼Œå»ºè®®é’ˆå¯¹å®é™…ç”Ÿäº§workloadé‡æ–°æ ¡å‡†
   ç›®æ ‡å€¼ï¼ˆ1000mså¯èƒ½åªé€‚ç”¨äºsampleâ‰¤50çš„åœºæ™¯ï¼‰ã€‚

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
æ ¸å¿ƒæ´å¯Ÿ
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

1. efSearch=32 vs 96: ä»…å·®2% (~25ms)ï¼Œä½†èŠ‚çœ50%èµ„æº â­
2. Warmup 100æ¡: æå‡10-15% (680msâ†’615ms)
3. Concurrency=4 æœ€ä¼˜: æ¯”12ä½20% (615ms vs 740ms)
4. Sample sizeæ˜¯P95çš„æœ€å¤§å½±å“å› ç´ : 30â†’200å¯¼è‡´+124%å»¶è¿Ÿ
5. Hardæ•°æ®é›†éœ€ä¿®å¤: æ‰€æœ‰å®éªŒrecall=0

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ä¸‹ä¸€æ­¥è¡ŒåŠ¨å»ºè®®
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ç«‹å³:
  â–¡ ä¿æŒbaseline_v0ä½œä¸ºå½“å‰ç­–ç•¥ï¼ˆå·²è‡ªåŠ¨å›æ»šï¼‰
  â–¡ ä¿®å¤Hardæ•°æ®é›†qrelsè·¯å¾„/æ ¼å¼é—®é¢˜
  
çŸ­æœŸ(1-2å¤©):
  â–¡ ç”¨å®é™…ç”Ÿäº§sample sizeé‡æ–°æ ¡å‡†P95ç›®æ ‡
  â–¡ è‹¥ç”Ÿäº§sample<50ï¼Œè€ƒè™‘åˆ‡æ¢åˆ°latency_v1
  
ä¸­æœŸ(1-2å‘¨):
  â–¡ å®ç°sample-size-awareåŠ¨æ€ç­–ç•¥
  â–¡ æ·»åŠ P95ç›‘æ§dashboard
  â–¡ A/B teståœ¨çœŸå®æµé‡ä¸‹éªŒè¯

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

å®Œæ•´æŠ¥å‘Š: cat reports/AB_LATENCY_FINAL_REPORT.md
è§†è§‰å›¾è¡¨: ls reports/plots/*.png
ç­–ç•¥åˆ‡æ¢: bash scripts/policy_switch.sh <baseline|latency_v1>

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ç»´æŠ¤è€…: AI Dev Assistant | å®¡æ ¸: andy | æ—¥æœŸ: 2025-11-07 | ç‰ˆæœ¬: v1.0
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

