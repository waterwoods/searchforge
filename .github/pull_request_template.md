# Pull Request - å®ˆé—¨äººè´¨é‡æ£€æŸ¥

## ğŸ“ å˜æ›´æè¿°

<!-- ç®€è¦è¯´æ˜æ­¤ PR çš„ç›®çš„å’Œä¸»è¦å˜æ›´ -->

## âœ… çƒŸæµ‹æŒ‡æ ‡ï¼ˆå¿…å¡«ï¼‰

**è¯·åœ¨æäº¤ PR å‰è¿è¡ŒçƒŸæµ‹å¹¶ç²˜è´´ç»“æœï¼š**

```bash
# è¿è¡Œä»¥ä¸‹å‘½ä»¤è·å–çƒŸæµ‹æŒ‡æ ‡
make dev-restart && make warmup && make smoke
```

### çƒŸæµ‹ç»“æœ

<!-- âš ï¸ å¿…é¡»å¡«å†™ï¼Œå¦åˆ™ PR å°†è¢«è¦æ±‚è¡¥å…… -->

```
Job ID: ___________________
recall_at_10: ______________
p95_ms: ___________________
source: runner
```

**çƒŸæµ‹é€šè¿‡æ ‡å‡†ï¼š**
- âœ… recall_at_10 > 0.90
- âœ… p95_ms < 1000ms
- âœ… source = "runner"

## ğŸ† å¹¶è¡Œå®éªŒç»“æœï¼ˆå¯é€‰ï¼Œå»ºè®®æä¾›ï¼‰

å¦‚æœè¿›è¡Œäº†å‚æ•°è°ƒä¼˜ï¼Œè¯·ç²˜è´´ `reports/winners_dev.json` ç‰‡æ®µï¼š

```bash
# è¿è¡Œä»¥ä¸‹å‘½ä»¤è·å–èƒœè€…é…ç½®
make grid-dev
cat reports/winners_dev.json | python3 -m json.tool
```

### èƒœè€…é…ç½®

```json
{
  "winner": {
    "name": "___________________",
    "top_k": ___,
    "recall_at_10": ___,
    "p95_ms": ___
  }
}
```

## ğŸ” æµ‹è¯•æ£€æŸ¥æ¸…å•

- [ ] æœ¬åœ°è¿è¡Œ `make preflight` é€šè¿‡
- [ ] æœ¬åœ°è¿è¡Œ `make smoke` é€šè¿‡
- [ ] ä»£ç éµå¾ªé¡¹ç›®è§„èŒƒï¼ˆæ—  CUDA ä¾èµ–ã€ä½¿ç”¨å¼€å‘é˜ˆå€¼ï¼‰
- [ ] å¦‚æœä¿®æ”¹äº†å®éªŒé€»è¾‘ï¼Œå·²è¿è¡Œ `make grid-dev` éªŒè¯
- [ ] æ›´æ–°äº†ç›¸å…³æ–‡æ¡£ï¼ˆå¦‚æœ‰å¿…è¦ï¼‰

## ğŸ“Š æ€§èƒ½å½±å“

<!-- å¦‚æœæ­¤ PR å½±å“æ€§èƒ½ï¼Œè¯·è¯´æ˜ï¼š-->
- **é¢„æœŸå½±å“**ï¼šï¼ˆæå‡ / é™ä½ / æ— å½±å“ï¼‰
- **å½±å“èŒƒå›´**ï¼šï¼ˆæŸ¥è¯¢å»¶è¿Ÿ / å¬å›ç‡ / èµ„æºä½¿ç”¨ï¼‰

## ğŸ”— ç›¸å…³é“¾æ¥

<!-- ç›¸å…³ Issueã€æ–‡æ¡£æˆ–è®¨è®ºé“¾æ¥ -->

---

## å®ˆé—¨äººæç¤º

**é»˜è®¤èµ°å¿«è·¯ï¼š** æ‰€æœ‰å®éªŒé»˜è®¤ä½¿ç”¨å¼€å‘é˜ˆå€¼ï¼ˆsampleâ‰¤50, fast_mode=true, rerank=falseï¼‰ã€‚

å¦‚éœ€è¿è¡Œç”Ÿäº§çº§é…ç½®ï¼Œè¯·åœ¨ PR æè¿°ä¸­æ˜ç¡®è¯´æ˜åŸå› ï¼Œå¹¶è®¾ç½® `FULL=1` æˆ– `PROD=1`ã€‚

**éªŒè¯å‘½ä»¤ï¼š**
```bash
# å®Œæ•´éªŒè¯æµç¨‹ï¼ˆæ¨èï¼‰
make full-validate

# å¿«é€ŸçƒŸæµ‹
make dev-restart && make warmup && make smoke

# å¹¶è¡Œå°æ‰¹å®éªŒ
make grid-dev
```

**å¦‚ä½•è·å–æŒ‡æ ‡ï¼š**
```bash
# æŸ¥çœ‹æœ€æ–°çƒŸæµ‹ç»“æœ
docker compose -f docker-compose.yml -f docker-compose.dev.yml exec -T rag-api sh -c '
  cd /app/.runs
  LATEST=$(ls -t | grep -v ".json" | head -1)
  cat $LATEST/metrics.json | python3 -m json.tool
'

# æŸ¥çœ‹èƒœè€…é…ç½®
cat reports/winners_dev.json | python3 -m json.tool
```
