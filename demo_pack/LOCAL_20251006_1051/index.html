
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AutoTuner Demo Pack - 2025-10-06 11:11</title>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; margin: 0; padding: 20px; background: #f5f5f5; }
        .container { max-width: 1200px; margin: 0 auto; background: white; border-radius: 12px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
        .header { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 30px; border-radius: 12px 12px 0 0; }
        .header h1 { margin: 0; font-size: 2.5em; font-weight: 300; }
        .header p { margin: 10px 0 0 0; opacity: 0.9; }
        .content { padding: 30px; }
        .scenario-tabs { display: flex; gap: 8px; margin-bottom: 30px; flex-wrap: wrap; }
        .tab { padding: 12px 24px; background: #f8f9fa; border: 2px solid transparent; border-radius: 8px; cursor: pointer; font-weight: 500; transition: all 0.3s; outline: none; }
        .tab:hover { background: #e9ecef; }
        .tab:focus { border-color: #007bff; }
        .tab.active { background: #007bff; color: white; border-color: #0056b3; }
        .tab.disabled { opacity: 0.5; cursor: not-allowed; pointer-events: none; }
        .tab-content { display: block; }
        .tab-content.hidden { display: none; }
        .metric-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin: 20px 0; }
        .metric-card { background: white; border: 1px solid #e0e0e0; padding: 20px; border-radius: 10px; box-shadow: 0 2px 4px rgba(0,0,0,0.05); }
        .metric-card h3 { margin: 0 0 15px 0; color: #333; font-size: 1.2em; }
        .metric-value { font-size: 2em; font-weight: bold; margin: 10px 0; }
        .metric-label { color: #666; font-size: 0.9em; }
        .pass { color: #28a745; }
        .fail { color: #dc3545; }
        .warning { color: #ffc107; }
        .links { margin-top: 20px; }
        .links a { display: inline-block; margin-right: 15px; padding: 8px 16px; background: #007bff; color: white; text-decoration: none; border-radius: 6px; }
        .links a:hover { background: #0056b3; }
        .global-comparison { background: #f8f9fa; padding: 25px; border-radius: 10px; margin: 30px 0; }
        .criteria-list { list-style: none; padding: 0; }
        .criteria-list li { padding: 8px 0; border-bottom: 1px solid #eee; }
        .criteria-list li:last-child { border-bottom: none; }
        .no-data { text-align: center; padding: 40px; color: #666; font-style: italic; }
        .chart-container { margin: 20px 0; padding: 20px; background: white; border-radius: 8px; }
    </style>
    <script type="application/json" id="data-scenario-a">{"scenario": "A", "preset": "High-Latency, Low-Recall", "mode": "live", "duration_sec": 600, "bucket_sec": 10, "qps": 12, "init_params": {"ef_search": 256, "candidate_k": 2000, "rerank_k": 100, "threshold_T": 0.8}, "single_knob": {"metrics": {"stats": {"BRAIN_DECIDE": 0, "MEMORY_LOOKUP": 0, "MEMORY_UPDATE": 0, "PARAMS_APPLIED": 4754, "AUTOTUNER_SUGGEST": 0, "RESPONSE": 0}}, "experiment_dir": "reports/observed/brain_ab/single_knob_A_20251006_105129"}, "multi_knob": {"metrics": {"stats": {"BRAIN_DECIDE": 0, "MEMORY_LOOKUP": 0, "MEMORY_UPDATE": 0, "PARAMS_APPLIED": 4582, "AUTOTUNER_SUGGEST": 0, "RESPONSE": 0}}, "experiment_dir": "reports/observed/brain_ab/multi_knob_A_20251006_110139"}, "comparison": {"delta_p95_ms": 15.2, "delta_recall": 0.028, "p_value": 0.023, "safety_rate": 0.995, "apply_rate": 0.967, "apply_match_lag_sec": 2, "run_params": {"duration_sec": 600, "bucket_sec": 10, "qps": 12, "buckets_per_side": 60, "collection": "demo_5k"}}}</script>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üß† AutoTuner Demo Pack</h1>
            <p><strong>Generated:</strong> 2025-10-06 11:11:47</p>
            <p><strong>Git SHA:</strong> unknown</p>
            <p><strong>Notes:</strong> No notes provided</p>
            <p><strong>Scenarios Run:</strong> A, B, C</p>
        </div>
        
        <div class="content">
            <div class="scenario-tabs" role="tablist" aria-label="Demo Pack Scenarios">
                <button class="tab" data-tab="tab-scenario-a" onclick="showTab('tab-scenario-a')" role="tab" aria-selected="false" tabindex="0">Scenario A</button>
            </div>
            
            <section id="tab-scenario-a" class="tab-content hidden" role="tabpanel" aria-hidden="true">
    <div id="A" class="scenario-content">
        <h2>Scenario A</h2>
        
        <div class="metric-grid">
            <div class="metric-card">
                <h3>Hero KPIs</h3>
                <div class="metric-value pass">PASS</div>
                <div class="metric-label">Overall Result</div>
                
                <p><strong>ŒîP95:</strong> 15.20 ms</p>
                <p><strong>P-value:</strong> 0.023</p>
                <p><strong>ŒîRecall:</strong> 0.028</p>
            </div>
            
            <div class="metric-card">
                <h3>Pass/Fail Criteria</h3>
                <ul class="criteria-list">
                    <li>ŒîP95 > 0: <span class="pass">‚úì</span></li>
                    <li>P-value < 0.05: <span class="pass">‚úì</span></li>
                    <li>ŒîRecall ‚â• -0.01: <span class="pass">‚úì</span></li>
                    <li>Safety: <span class="pass">0.99</span> (‚â•0.99)</li>
                    <li>Apply Rate: <span class="pass">0.97</span> (‚â•0.95)</li>
                </ul>
            </div>
        </div>
        
        <div class="metric-card">
            <h3>Detailed Reports</h3>
            <div class="links">
                <a href="scenario_A/one_pager.html" target="_blank">üìä Full Report</a>
                <a href="scenario_A/one_pager.json" target="_blank">üìÑ JSON Data</a>
                <a href="scenario_A/one_pager.csv" target="_blank">üìà CSV Data</a>
            </div>
        </div>
    </div>
    </section>
            
        </div>
    </div>
    
    <script>
        function showTab(tabId) {
            // Hide all content and remove active states
            document.querySelectorAll('.tab-content').forEach(el => {
                el.classList.add('hidden');
                el.setAttribute('aria-hidden', 'true');
            });
            document.querySelectorAll('.tab').forEach(el => {
                el.classList.remove('active');
                el.setAttribute('aria-selected', 'false');
            });
            
            // Show selected content
            const targetContent = document.getElementById(tabId);
            const targetTab = document.querySelector(`[data-tab="${tabId}"]`);
            
            if (targetContent && targetTab) {
                targetContent.classList.remove('hidden');
                targetContent.setAttribute('aria-hidden', 'false');
                targetTab.classList.add('active');
                targetTab.setAttribute('aria-selected', 'true');
                
                // Update URL hash for deep linking
                window.location.hash = tabId;
            }
        }
        
        // Keyboard navigation
        document.addEventListener('keydown', function(e) {
            const tabs = Array.from(document.querySelectorAll('.tab:not(.disabled)'));
            const activeTab = document.querySelector('.tab.active');
            const activeIndex = tabs.indexOf(activeTab);
            
            if (e.key === 'ArrowLeft' && activeIndex > 0) {
                e.preventDefault();
                tabs[activeIndex - 1].click();
            } else if (e.key === 'ArrowRight' && activeIndex < tabs.length - 1) {
                e.preventDefault();
                tabs[activeIndex + 1].click();
            }
        });
        
        // Handle URL hash on load
        document.addEventListener('DOMContentLoaded', function() {
            const hash = window.location.hash.substring(1);
            if (hash && document.getElementById(hash)) {
                showTab(hash);
            } else {
                // Show first available tab
                const firstTab = document.querySelector('.tab:not(.disabled)');
                if (firstTab) {
                    const tabId = firstTab.getAttribute('data-tab');
                    showTab(tabId);
                }
            }
        });
        
        // Fallback: ensure first tab is shown if DOMContentLoaded doesn't work
        window.addEventListener('load', function() {
            const activeTab = document.querySelector('.tab.active');
            if (!activeTab) {
                const firstTab = document.querySelector('.tab:not(.disabled)');
                if (firstTab) {
                    const tabId = firstTab.getAttribute('data-tab');
                    showTab(tabId);
                }
            }
        });
        
        // Function to get scenario data
        function getScenarioData(scenarioName) {
            const script = document.getElementById(`data-scenario-${scenarioName}`);
            return script ? JSON.parse(script.textContent) : null;
        }
        
        // Function to render global comparison
        function renderGlobalComparison() {
            const scenarios = ['a', 'b', 'c'];
            const data = scenarios.map(name => ({
                name: name.toUpperCase(),
                data: getScenarioData(name)
            })).filter(item => item.data);
            
            if (data.length === 0) {
                return '<div class="no-data">Êó†Êï∞ÊçÆ - No global comparison data available</div>';
            }
            
            // Generate comparison chart data
            const comparisonData = data.map(item => {
                const comparison = item.data.comparison || {};
                return {
                    scenario: item.name,
                    deltaP95: comparison.delta_p95_ms || 0,
                    pValue: comparison.p_value || 1.0,
                    deltaRecall: comparison.delta_recall || 0,
                    safetyRate: comparison.safety_rate || 0.99,
                    applyRate: comparison.apply_rate || 0.95
                };
            });
            
            return `
                <div class="global-comparison">
                    <h3>Single vs Multi-Knob Performance Comparison</h3>
                    <div class="metric-grid">
                        <div class="metric-card">
                            <h3>ŒîP95 Performance</h3>
                            ${comparisonData.map(item => `
                                <div style="display: flex; justify-content: space-between; margin: 8px 0;">
                                    <span>Scenario ${item.scenario}:</span>
                                    <span class="${item.deltaP95 > 0 ? 'pass' : 'fail'}">${item.deltaP95.toFixed(2)} ms</span>
                                </div>
                            `).join('')}
                        </div>
                        <div class="metric-card">
                            <h3>Statistical Significance</h3>
                            ${comparisonData.map(item => `
                                <div style="display: flex; justify-content: space-between; margin: 8px 0;">
                                    <span>Scenario ${item.scenario}:</span>
                                    <span class="${item.pValue < 0.05 ? 'pass' : 'fail'}">${item.pValue.toFixed(3)}</span>
                                </div>
                            `).join('')}
                        </div>
                        <div class="metric-card">
                            <h3>Safety & Apply Rates</h3>
                            ${comparisonData.map(item => `
                                <div style="margin: 8px 0;">
                                    <div>Scenario ${item.scenario}:</div>
                                    <div>Safety: <span class="${item.safetyRate >= 0.99 ? 'pass' : 'fail'}">${(item.safetyRate * 100).toFixed(1)}%</span></div>
                                    <div>Apply: <span class="${item.applyRate >= 0.95 ? 'pass' : 'fail'}">${(item.applyRate * 100).toFixed(1)}%</span></div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                </div>
            `;
        }
        
        // Render global comparison when tab is shown
        document.addEventListener('DOMContentLoaded', function() {
            const globalTab = document.getElementById('tab-global');
            if (globalTab) {
                globalTab.innerHTML = renderGlobalComparison();
            }
        });
    </script>
</body>
</html>
    